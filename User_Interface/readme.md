# ЁЯЪЪ Truck Classification System

р╕гр╕░р╕Ър╕Ър╕Ир╕▒р╕Фр╕Ыр╕гр╕░р╣Ар╕ар╕Чр╕гр╕Цр╕Ър╕гр╕гр╕Чр╕╕р╕Бр╕Юр╕гр╣Йр╕нр╕бр╣Бр╕кр╕Фр╕Зр╕кр╕Цр╕┤р╕Хр╕┤р╣Бр╕ер╕░р╕Ыр╕гр╕░р╕зр╕▒р╕Хр╕┤

## ЁЯУЛ р╕Вр╕▒р╣Йр╕Щр╕Хр╕нр╕Щр╕Бр╕▓р╕гр╣Гр╕Кр╣Йр╕Зр╕▓р╕Щ

### 1. р╣Ар╕Хр╕гр╕╡р╕вр╕б PostgreSQL Database
р╕гр╕▒р╕Щр╕Др╕│р╕кр╕▒р╣Ир╕З SQL р╕Чр╕╡р╣Ир╕нр╕вр╕╣р╣Ир╣Гр╕Щ pgAdmin р╕лр╕гр╕╖р╕н PostgreSQL Client:

```sql
-- р╣Гр╕Кр╣Йр╣Др╕Яр╕ер╣М SQL р╕Чр╕╡р╣Ир╕Др╕╕р╕Ур╕кр╕гр╣Йр╕▓р╕Зр╣Др╕зр╣Йр╣Бр╕ер╣Йр╕з (р╕кр╕гр╣Йр╕▓р╕Зр╕Хр╕▓р╕гр╕▓р╕Зр╣Бр╕ер╕░ vehicle_classes)
```

### 2. р╣Ар╕Юр╕┤р╣Ир╕бр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Чр╕Фр╕кр╕нр╕Ъ
```bash
# р╕гр╕▒р╕Щр╣Др╕Яр╕ер╣М insert_test_data.sql р╣Гр╕Щ pgAdmin
# р╕лр╕гр╕╖р╕нр╣Гр╕Кр╣Йр╕Др╕│р╕кр╕▒р╣Ир╕З:
psql -U postgres -d truck_classification -f insert_test_data.sql
```

### 3. р╕Хр╕▒р╣Йр╕Зр╕Др╣Ир╕▓ secrets.toml
р╣Др╕Яр╕ер╣М `.streamlit/secrets.toml` р╕Др╕зр╕гр╕бр╕╡р╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Фр╕▒р╕Зр╕Щр╕╡р╣Й:

```toml
DB_HOST = "host.docker.internal"  # р╕кр╕│р╕лр╕гр╕▒р╕Ъ Docker Desktop (Mac/Windows)
# р╕лр╕гр╕╖р╕нр╣Гр╕Кр╣Й "172.17.0.1" р╕кр╕│р╕лр╕гр╕▒р╕Ъ Linux
DB_NAME = "truck_classification"
DB_USER = "postgres"
DB_PASSWORD = "123456"  # р╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╣Ар╕Ыр╣Зр╕Щр╕гр╕лр╕▒р╕кр╕Ьр╣Ир╕▓р╕Щр╕Вр╕нр╕Зр╕Др╕╕р╕У
DB_PORT = 5432
```

**р╕лр╕бр╕▓р╕вр╣Ар╕лр╕Хр╕╕р╕кр╕│р╕Др╕▒р╕Н:**
- **Windows/Mac**: р╣Гр╕Кр╣Й `host.docker.internal`
- **Linux**: р╣Гр╕Кр╣Й `172.17.0.1` р╕лр╕гр╕╖р╕н IP р╕Вр╕нр╕З network bridge

### 4. р╕гр╕▒р╕Щ Docker
```bash
# р╕кр╕гр╣Йр╕▓р╕Зр╣Бр╕ер╕░р╕гр╕▒р╕Щ Container
docker-compose up --build

# р╕лр╕гр╕╖р╕нр╕гр╕▒р╕Щр╣Бр╕Ър╕Ъ Background
docker-compose up -d --build

# р╕Фр╕╣ logs
docker-compose logs -f

# р╕лр╕вр╕╕р╕Ф Container
docker-compose down
```

### 5. р╣Ар╕Вр╣Йр╕▓р╣Гр╕Кр╣Йр╕Зр╕▓р╕Щ
р╣Ар╕Ыр╕┤р╕Фр╣Ар╕Ър╕гр╕▓р╕зр╣Мр╣Ар╕Лр╕нр╕гр╣М: **http://localhost:8501**

## ЁЯФз р╕Бр╕▓р╕гр╣Бр╕Бр╣Йр╕Ыр╕▒р╕Нр╕лр╕▓

### р╕Ыр╕▒р╕Нр╕лр╕▓: Connection refused to PostgreSQL

**р╕зр╕┤р╕Шр╕╡р╣Бр╕Бр╣Й (Windows/Mac):**
```toml
DB_HOST = "host.docker.internal"
```

**р╕зр╕┤р╕Шр╕╡р╣Бр╕Бр╣Й (Linux):**
```toml
DB_HOST = "172.17.0.1"
```

р╕лр╕гр╕╖р╕нр╕лр╕▓ IP р╕Вр╕нр╕Зр╣Ар╕Др╕гр╕╖р╣Ир╕нр╕З:
```bash
# Linux
hostname -I | awk '{print $1}'

# Mac
ipconfig getifaddr en0
```

### р╕Ыр╕▒р╕Нр╕лр╕▓: р╣Др╕бр╣Ир╕бр╕╡р╕Вр╣Йр╕нр╕бр╕╣р╕ер╣Бр╕кр╕Фр╕З
р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕зр╣Ир╕▓р╕бр╕╡р╕Вр╣Йр╕нр╕бр╕╣р╕ер╣Гр╕Щр╕Рр╕▓р╕Щр╕Вр╣Йр╕нр╕бр╕╣р╕е:

```sql
SELECT COUNT(*) FROM toll_transactions;
SELECT * FROM toll_transactions WHERE DATE(created_at) = CURRENT_DATE;
```

### р╕Ыр╕▒р╕Нр╕лр╕▓: Port 8501 р╕Цр╕╣р╕Бр╣Гр╕Кр╣Йр╕Зр╕▓р╕Щр╕нр╕вр╕╣р╣И
```bash
# р╕Др╣Йр╕Щр╕лр╕▓ process р╕Чр╕╡р╣Ир╣Гр╕Кр╣Й port
# Windows
netstat -ano | findstr :8501

# Mac/Linux
lsof -i :8501

# р╕лр╕вр╕╕р╕Ф Docker р╣Бр╕ер╕░р╕ер╕нр╕Зр╣Гр╕лр╕бр╣И
docker-compose down
docker-compose up --build
```

## ЁЯУБ р╣Вр╕Др╕гр╕Зр╕кр╕гр╣Йр╕▓р╕Зр╣Др╕Яр╕ер╣М

```
truck-classification/
тФЬтФАтФА .streamlit/
тФВ   тФФтФАтФА secrets.toml          # р╕Вр╣Йр╕нр╕бр╕╣р╕ер╣Ар╕Кр╕╖р╣Ир╕нр╕бр╕Хр╣Ир╕н Database
тФЬтФАтФА App.py                     # р╣Др╕Яр╕ер╣Мр╕лр╕ер╕▒р╕Бр╕Вр╕нр╕З Streamlit
тФЬтФАтФА Dockerfile                 # р╕кр╕│р╕лр╕гр╕▒р╕Ър╕кр╕гр╣Йр╕▓р╕З Docker Image
тФЬтФАтФА docker-compose.yml         # р╕кр╕│р╕лр╕гр╕▒р╕Ър╕гр╕▒р╕Щ Container
тФЬтФАтФА requirements.txt           # Python dependencies
тФЬтФАтФА insert_test_data.sql       # р╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Чр╕Фр╕кр╕нр╕Ъ
тФФтФАтФА README.md                  # р╕Др╕╣р╣Ир╕бр╕╖р╕нр╕Щр╕╡р╣Й
```

## ЁЯОп р╕Яр╕╡р╣Ар╕Ир╕нр╕гр╣М

- тЬЕ р╣Бр╕кр╕Фр╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕ер╣Бр╕Ър╕Ъ Real-time
- тЬЕ р╕Бр╕гр╕▓р╕Яр╣Бр╕Чр╣Ир╕Зр╣Бр╕кр╕Фр╕Зр╕Ир╕│р╕Щр╕зр╕Щр╣Бр╕ер╕░р╕вр╕нр╕Фр╕гр╕зр╕бр╣Бр╕Хр╣Ир╕ер╕░р╕Ыр╕гр╕░р╣Ар╕ар╕Чр╕гр╕Ц
- тЬЕ р╕кр╕ер╕▒р╕Ър╕Фр╕╣р╕Вр╣Йр╕нр╕бр╕╣р╕ер╣Бр╕Хр╣Ир╕ер╕░ Gate (1, 2, 3)
- тЬЕ р╕Фр╕╣р╕Ыр╕гр╕░р╕зр╕▒р╕Хр╕┤р╕гр╕▓р╕вр╕Бр╕▓р╕гр╕вр╣Йр╕нр╕Щр╕лр╕ер╕▒р╕Зр╕Хр╕▓р╕бр╕зр╕▒р╕Щр╕Чр╕╡р╣И
- тЬЕ р╕кр╕гр╕╕р╕Ыр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Чр╕╕р╕Б Gate р╕гр╕зр╕бр╕Бр╕▒р╕Щ
- тЬЕ р╣Ар╕Кр╕╖р╣Ир╕нр╕бр╕Хр╣Ир╕н PostgreSQL Database

## ЁЯУК р╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Ыр╕гр╕░р╣Ар╕ар╕Чр╕гр╕Ц (12 р╕Др╕ер╕▓р╕к)

| Class ID | р╕Кр╕╖р╣Ир╕нр╕Ыр╕гр╕░р╣Ар╕ар╕Ч | Entry Fee | X-ray Fee | р╕гр╕зр╕б |
|----------|-----------|-----------|-----------|-----|
| 0 | car | 0 | 0 | 0 |
| 1 | other | 0 | 0 | 0 |
| 2 | other_truck | 100 | 50 | 150 |
| 3 | pickup_truck | 0 | 0 | 0 |
| 4 | truck_20_back | 100 | 250 | 350 |
| 5 | truck_20_front | 100 | 250 | 350 |
| 6 | truck_20x2 | 100 | 500 | 600 |
| 7 | truck_40 | 100 | 350 | 450 |
| 8 | truck_roro | 100 | 50 | 150 |
| 9 | truck_tail | 100 | 50 | 150 |
| 10 | motorcycle | 0 | 0 | 0 |
| 11 | truck_head | 100 | 50 | 150 |

## ЁЯСитАНЁЯТ╗ Developer
- **Name**: Aik Pick Tle
- **Year**: 2026

## ЁЯУЭ License
Private Project